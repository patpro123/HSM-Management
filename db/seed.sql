-- Seed data for HSM (sample instruments, teachers, students, packages, batches, enrollments, payments)

-- Instruments
INSERT INTO instruments (id,name,max_batch_size,online_supported)
VALUES
('00000000-0000-0000-0000-000000000001','Keyboard',8,true),
('00000000-0000-0000-0000-000000000002','Guitar',8,true),
('00000000-0000-0000-0000-000000000003','Piano',6,false),
('00000000-0000-0000-0000-000000000004','Drums',6,false),
('00000000-0000-0000-0000-000000000005','Tabla',6,false),
('00000000-0000-0000-0000-000000000006','Violin',6,false),
('00000000-0000-0000-0000-000000000007','Hindustani Vocals',10,false),
('00000000-0000-0000-0000-000000000008','Carnatic Vocals',10,false)
ON CONFLICT (id) DO NOTHING;

-- Teachers (2 fixed salary, 3 per-class)
INSERT INTO teachers (id,name,phone,role,payout_terms)
VALUES
('10000000-0000-0000-0000-000000000001','Ravi Kumar','+91-9000000001','teacher','{"type":"fixed","salary":30000}'::jsonb),
('10000000-0000-0000-0000-000000000002','Anita Sharma','+91-9000000002','teacher','{"type":"fixed","salary":25000}'::jsonb),
('10000000-0000-0000-0000-000000000003','Suresh Patel','+91-9000000003','teacher','{"type":"per_student_monthly","rate":200}'::jsonb),
('10000000-0000-0000-0000-000000000004','Meena Iyer','+91-9000000004','teacher','{"type":"per_student_monthly","rate":220}'::jsonb),
('10000000-0000-0000-0000-000000000005','Vikram Rao','+91-9000000005','teacher','{"type":"per_student_monthly","rate":180}'::jsonb)
ON CONFLICT (id) DO NOTHING;

-- Students
INSERT INTO students (id,name,dob,phone,guardian_contact)
VALUES
('20000000-0000-0000-0000-000000000001','Priya Singh','2010-05-12','+91-9010000001','Mrs. Singh'),
('20000000-0000-0000-0000-000000000002','Rohit Desai','2008-11-23','+91-9010000002','Mr. Desai'),
('20000000-0000-0000-0000-000000000003','Sanjay Kumar','2005-01-18','+91-9010000003','Mr. Kumar'),
('20000000-0000-0000-0000-000000000004','Neha Reddy','2012-09-09','+91-9010000004','Mrs. Reddy'),
('20000000-0000-0000-0000-000000000005','Aisha Khan','2011-07-30','+91-9010000005','Mrs. Khan'),
('20000000-0000-0000-0000-000000000006','Arjun Gupta','2009-03-15','+91-9010000006','Mr. Gupta')
ON CONFLICT (id) DO NOTHING;

-- Packages (Monthly 8 classes; Quarterly 24 classes)
INSERT INTO packages (id,instrument_id,name,classes_count,price)
VALUES
('40000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001','Keyboard - Monthly (8)','8',2000.00),
('40000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000001','Keyboard - Quarterly (24)','24',5400.00),
('40000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000002','Guitar - Monthly (8)','8',1800.00),
('40000000-0000-0000-0000-000000000004','00000000-0000-0000-0000-000000000002','Guitar - Quarterly (24)','24',4800.00)
ON CONFLICT (id) DO NOTHING;

-- Batches (sample schedule)
INSERT INTO batches (id,instrument_id,teacher_id,recurrence,start_time,end_time,capacity,is_makeup)
VALUES
('30000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001','10000000-0000-0000-0000-000000000001','Tue/Thu 17:00-18:00','17:00','18:00',8,false),
('30000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000001','10000000-0000-0000-0000-000000000001','Tue/Thu 18:00-19:00','18:00','19:00',8,false),
('30000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000002','10000000-0000-0000-0000-000000000003','Wed/Fri 17:00-18:00','17:00','18:00',8,false),
('30000000-0000-0000-0000-000000000004','00000000-0000-0000-0000-000000000002','10000000-0000-0000-0000-000000000003','Wed/Fri 18:00-19:00','18:00','19:00',8,false)
ON CONFLICT (id) DO NOTHING;

-- Enrollments and assignments (set classes_remaining based on purchased package)
INSERT INTO enrollments (id,student_id,instrument_id,classes_remaining)
VALUES
('50000000-0000-0000-0000-000000000001','20000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001',8), -- Priya keyboard monthly
('50000000-0000-0000-0000-000000000002','20000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000002',24) -- Rohit guitar quarterly
ON CONFLICT (id) DO NOTHING;

-- Link enrollments to batches (two batches per instrument)
INSERT INTO enrollment_batches (id,enrollment_id,batch_id)
VALUES
('60000000-0000-0000-0000-000000000001','50000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000001'),
('60000000-0000-0000-0000-000000000002','50000000-0000-0000-0000-000000000001','30000000-0000-0000-0000-000000000002'),
('60000000-0000-0000-0000-000000000003','50000000-0000-0000-0000-000000000002','30000000-0000-0000-0000-000000000003'),
('60000000-0000-0000-0000-000000000004','50000000-0000-0000-0000-000000000002','30000000-0000-0000-0000-000000000004')
ON CONFLICT (id) DO NOTHING;

-- Payments linking students to packages
INSERT INTO payments (id,student_id,package_id,amount,method,transaction_id)
VALUES
('70000000-0000-0000-0000-000000000001','20000000-0000-0000-0000-000000000001','40000000-0000-0000-0000-000000000001',2000.00,'razorpay','txn_kr_0001'),
('70000000-0000-0000-0000-000000000002','20000000-0000-0000-0000-000000000002','40000000-0000-0000-0000-000000000004',4800.00,'razorpay','txn_gt_0002')
ON CONFLICT (id) DO NOTHING;

-- Sample attendance record
INSERT INTO attendance_records (id,session_date,batch_id,student_id,status,source,confidence)
VALUES
('80000000-0000-0000-0000-000000000001','2026-01-02','30000000-0000-0000-0000-000000000001','20000000-0000-0000-0000-000000000001','present','whatsapp',0.98)
ON CONFLICT (id) DO NOTHING;

-- Done
